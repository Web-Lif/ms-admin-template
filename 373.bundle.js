"use strict";(self.webpackChunkms_template=self.webpackChunkms_template||[]).push([[373],{4470:(e,n,t)=>{t.r(n);var r=t(6985),a=t.n(r),o=t(563),c=t.n(o),i=t(9656),u=(t(793),t(9650)),l=(t(2714),t(8834)),s=(t(3341),t(789)),m=(t(4895),t(9166)),f=(t(1761),t(8108)),d=(t(7582),t(3013)),p=(t(8975),t(9210)),v=t(8082),h=t(4616),y=t(9317),b=t(5592),E=t(1627),g=t(7711),k=t(6570),w=t(79),x=t(438),S=t.n(x),Z=t(1625),O=t(8948);const T=function(){var e=(0,r.useRef)(null);return(0,r.useEffect)((function(){var n;return null===(n=e.current)||void 0===n||n.continuousStart(),function(){var n;null===(n=e.current)||void 0===n||n.complete()}}),[]),a().createElement(a().Fragment,null,a().createElement(w.Z,{ref:e}))};var A=t(3379),R=t.n(A),P=t(7795),N=t.n(P),j=t(569),C=t.n(j),F=t(3565),L=t.n(F),M=t(9216),U=t.n(M),Q=t(4589),D=t.n(Q),I=t(9461),B={};B.styleTagTransform=D(),B.setAttributes=L(),B.insert=C().bind(null,"head"),B.domAPI=N(),B.insertStyleElement=U();R()(I.Z,B);const H=I.Z&&I.Z.locals?I.Z.locals:void 0;var _=t(4035);function K(e,n,t,r,a,o,c){try{var i=e[o](c),u=i.value}catch(e){return void t(e)}i.done?n(u):Promise.resolve(u).then(r,a)}function z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?z(Object(t),!0).forEach((function(n){W(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function W(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function J(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,a,o=[],c=!0,i=!1;try{for(t=t.call(e);!(c=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==t.return||t.return()}finally{if(i)throw a}}return o}(e,n)||Y(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,n){if(e){if("string"==typeof e)return V(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?V(e,n):void 0}}function V(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var X=function(e){var n=e.name,t=(0,i.k6)();return a().createElement(d.Z,{overlay:a().createElement(p.Z,null,a().createElement(p.Z.Item,{key:"logout",icon:a().createElement(h.Z,null)},a().createElement("div",{role:"button","aria-hidden":"true",onClick:function(){(0,O.iA)(),t.push("/User/Login")}},"退出登录")))},a().createElement("div",{className:H.userName},n))},$=function(){return a().createElement(a().Fragment,null,a().createElement(f.Z,{centered:!0},a().createElement(f.Z.TabPane,{tab:"消息(4)",key:"message",className:H.notificationTabs},"消息内容"),a().createElement(f.Z.TabPane,{tab:"代办(10)",key:"task",className:H.notificationTabs},"代办内容")),a().createElement("div",{className:H.notificationBottom},a().createElement("div",null,"清空通知"),a().createElement("div",null,"查看更多")))},ee=function(e){var n=e.count,t=a().createElement(p.Z,null,a().createElement($,null));return a().createElement(d.Z,{trigger:["click"],overlay:t,placement:"bottomLeft",overlayClassName:H.notificationOverlay},a().createElement("div",{className:H.notificationDropdown},a().createElement(m.Z,{count:n,className:H.notification},a().createElement(y.Z,null))))},ne=function(e,n){return e.findIndex((function(e){return(e.key||e.path)===n}))},te=function e(n,t){n.forEach((function(n){var r,a=t||"首页";/^\/.*/.test(a)&&(a=null===(r=a)||void 0===r?void 0:r.substr(1));n.fullName=a,n.children&&e(n.children,"".concat(t||"","/").concat(n.name))}))};const re=function(e){var n=e.children,t=(0,i.TH)(),o=G((0,r.useState)({name:"",title:"",menus:[]}),2),c=o[0],m=o[1],h=G((0,r.useState)([{path:"/",name:"首页",closable:!1}]),2),y=h[0],x=h[1],A=G((0,r.useState)("/"),2),R=A[0],P=A[1],N=G((0,r.useState)(),2),j=N[0],C=N[1],F=(0,r.useRef)(null),L=(0,r.useRef)(null),M=function e(n){var t=[];return n.forEach((function(n,r){n.children?t.splice.apply(t,[r,0].concat(J(e(n.children)))):t.push(n)})),t},U=G((0,r.useState)([]),2),Q=U[0],D=U[1];(0,r.useEffect)((function(){(0,_.OY)("ms-tabs").then((function(e){(null==e?void 0:e.length)>0&&x(e)})),(0,_.OY)("ms-active-key").then((function(e){e&&P(e)}));var e=function(e){var n;"/"===e.key&&(e.stopPropagation(),null===(n=L.current)||void 0===n||n.focus())};return window.addEventListener("keyup",e),function(){window.removeEventListener("keyup",e)}}),[]),(0,r.useEffect)((function(){(0,_.xQ)("ms-tabs",y.map((function(e){return q(q({},e),{},{onClick:void 0})})))}),[y]),(0,r.useEffect)((function(){(0,_.xQ)("ms-active-key",R)}),[R]);var I,B,z={open:function(e){var n=e.item,t=e.active,r=void 0===t||t,a=e.params,o=n.key||n.path;-1===ne(y,o)&&x([].concat(J(y),[q(q({},n),{},{params:a})])),r&&P(o)},close:function(e){var n=e.key,t=e.goback,r=ne(y,n);-1!==r&&(y.splice(r,1),x(J(y))),t&&P(t)},active:function(e){var n=e.key,t=e.params,r=ne(y,n);y[r].params=t,x(J(y)),P(n)},status:"passive"},W=function(){return"multi"===O.vc.tabs&&"side"===O.vc.layout};return a().createElement(a().Fragment,null,a().createElement(w.Z,{ref:F}),a().createElement(v.ZP,{className:H.proLayout,title:c.title,layout:O.vc.layout,navTheme:O.vc.navTheme,headerTheme:O.vc.headerTheme,location:W()?{pathname:R}:t,fixedHeader:!0,fixSiderbar:!0,menu:{request:(I=regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,O.cb)();case 3:return n=e.sent,te(n.menus),m(n),t=M(n.menus).map((function(e){return{key:e.path||e.key||"",description:e.fullName,title:e.name||"",data:e}})),D(t),e.abrupt("return",n.menus);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})),B=function(){var e=this,n=arguments;return new Promise((function(t,r){var a=I.apply(e,n);function o(e){K(a,t,r,o,c,"next",e)}function c(e){K(a,t,r,o,c,"throw",e)}o(void 0)}))},function(){return B.apply(this,arguments)})},headerContentRender:function(){if(W()){return a().createElement(f.Z,{type:"editable-card",hideAdd:!0,className:H.tabsNavTop,activeKey:R,renderTabBar:function(e,n){return a().createElement(n,e,(function(e){return function(e){return a().createElement(d.Z,{overlay:a().createElement(p.Z,null,a().createElement(p.Z.Item,{key:"reload",icon:a().createElement(b.Z,null),onClick:function(){var n;null===(n=F.current)||void 0===n||n.continuousStart();var t=0;(null==j?void 0:j.key)===e.key&&(t+=((null==j?void 0:j.count)||0)+1),C({key:e.key,count:t}),setTimeout((function(){var e;null===(e=F.current)||void 0===e||e.complete()}),0)}},"重新加载"),a().createElement(p.Z.Item,{key:"closeOther",icon:a().createElement(E.Z,null),onClick:function(){var n=y.filter((function(n){var t=n.key||n.path;return!!["/",e.key].includes(t)}));P(e.key),x(n)}},"关闭其他标签页"),a().createElement(p.Z.Item,{key:"closeRight",icon:a().createElement(g.Z,null),onClick:function(){var n=ne(y,e.key),t=y.slice(0,n+1);-1===ne(t,R)&&P(e.key),x(t)}},"关闭右侧标签页")),trigger:["contextMenu"]},e)}(e)}))},onEdit:function(e,n){if("remove"===n){var t=ne(y,e);if(-1!==t){var r;if(y.splice(t,1),x(J(y)),y.length>0){var a=y[y.length-1];r=a.key||a.path}P(r||"/")}}},onChange:function(e){x(J(y)),P(e)}},y.map((function(e){return a().createElement(f.Z.TabPane,{tab:e.name,key:e.key||e.path,closable:e.closable})})))}return null},rightContentRender:function(){return a().createElement(u.Z,null,a().createElement(l.Z,{ref:L,showSearch:!0,value:"",style:{width:250},filterOption:function(e,n){var t=S()(null==n?void 0:n.children[0],{style:S().STYLE_FIRST_LETTER}),r=S()(e,{style:S().STYLE_FIRST_LETTER});return new RegExp("^".concat(r.join(""),".*")).test(t.join(""))},onSelect:function(e){var n=Q.find((function(n){return n.key===e}));n&&z.open({item:n.data})},suffixIcon:a().createElement(k.Z,null)},Q.map((function(e){return a().createElement(l.Z.Option,{key:e.key,value:e.key},e.title," ",a().createElement("br",null),a().createElement(s.Z.Text,{type:"secondary"},e.description))}))),a().createElement(ee,{count:20}),a().createElement(X,{name:c.name}))},menuItemRender:function(e,n){var t=e.path;if(t){if("single"===O.vc.tabs)return a().createElement(i.rU,{to:t},n);if(W()){return a().createElement("div",{role:"link","aria-hidden":"true",onClick:function(){var n=e.key||e.path;-1===y.findIndex((function(e){var t=e.key||e.path;return n===t}))&&x([].concat(J(y),[e])),P(n)}},n)}}return n}},function(){if(W()){return a().createElement(f.Z,{className:H.tabsHideNav,activeKey:R},y.map((function(e){var n=window.g_routers.find((function(n){return n.path===e.path})),t=(null==n?void 0:n.component)||Z.default,o=e.key||e.path||"";return z.status=o===R?"active":"passive",a().createElement(f.Z.TabPane,{tab:e.name,key:e.key||e.path,closable:e.closable,forceRender:!0},a().createElement(r.Suspense,{fallback:a().createElement(T,null)},a().createElement(t,{key:(null==j?void 0:j.key)===o?j.count:void 0,tabs:q(q({},z),{},{params:e.params})})))})))}return n}()))};const ae=function(e){var n,t=e.children;return n=(0,i.TH)(),(0,O.QN)().includes(n.pathname)?a().createElement(a().Fragment,null,t):(0,O.He)()?a().createElement(re,null,t):((0,i.k6)().replace("/User/Login"),null)};var oe=a().lazy((function(){return t.e(21).then(t.bind(t,2021))})),ce=a().lazy((function(){return t.e(963).then(t.bind(t,8963))})),ie=a().lazy((function(){return t.e(663).then(t.bind(t,3663))})),ue=[{path:"/",component:a().lazy((function(){return t.e(21).then(t.bind(t,2021))}))},{path:"/User/Login",component:a().lazy((function(){return t.e(963).then(t.bind(t,8963))}))},{path:"/welcome",component:a().lazy((function(){return t.e(663).then(t.bind(t,3663))}))}],le=[],se=a().lazy((function(){return Promise.resolve().then(t.bind(t,1625))}));const me=function(e){var n=e.routers,t=void 0===n?[]:n;return a().createElement(i.VK,{basename:"/ms-template"},a().createElement(i.rs,null,a().createElement(i.AW,{path:"/",exact:!0,sensitive:!0,render:function(e){return a().createElement(ae,e,a().createElement(r.Suspense,{fallback:a().createElement(T,null)},a().createElement(oe,e)))}}),a().createElement(i.AW,{path:"/User/Login",exact:!0,sensitive:!0,render:function(e){return a().createElement(ae,e,a().createElement(r.Suspense,{fallback:a().createElement(T,null)},a().createElement(ce,e)))}}),a().createElement(i.AW,{path:"/welcome",exact:!0,sensitive:!0,render:function(e){return a().createElement(ae,e,a().createElement(r.Suspense,{fallback:a().createElement(T,null)},a().createElement(ie,e)))}}),t.map((function(e){return a().createElement(i.AW,{path:e.path,exact:!0,sensitive:!0,key:e.path,render:function(n){var t=e.component;return a().createElement(ae,n,a().createElement(r.Suspense,{fallback:a().createElement(T,null)},a().createElement(t,n)))}})})),a().createElement(i.AW,{path:"*",render:function(e){var n=a().createElement(se,e);return a().createElement(ae,e,a().createElement(r.Suspense,{fallback:a().createElement("div",null)},n))}})))};if(window.g_routers=ue.concat(le),document.querySelector("#root"))c().render(a().createElement(me,{routers:le}),document.querySelector("#root"));else{var fe=document.createElement("div");fe.setAttribute("id","root"),fe.style.width="100%",fe.style.height="100%",document.body.appendChild(fe),c().render(a().createElement(me,{routers:le}),fe)}},8948:(e,n,t)=>{t.d(n,{QN:()=>o,cb:()=>c,He:()=>i,iA:()=>u,vc:()=>l});var r=t(4035);function a(e,n,t,r,a,o,c){try{var i=e[o](c),u=i.value}catch(e){return void t(e)}i.done?n(u):Promise.resolve(u).then(r,a)}var o=function(){return["/User/Login"]},c=function(){var e,n=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{name:"系统管理员",title:"MS Template",menus:[{path:"/",name:"欢迎页面",children:[{path:"/one/welcome",name:"第一个",children:[{path:"/welcome",name:"第二个"},{path:"/test/",name:"微前端首页"}]}]}]});case 1:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var c=e.apply(n,t);function i(e){a(c,r,o,i,u,"next",e)}function u(e){a(c,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),i=function(){return!!localStorage.getItem("ms-token")},u=function(){localStorage.clear(),(0,r.O5)()},l={layout:"side",navTheme:"dark",headerTheme:"dark",tabs:"multi"}},1625:(e,n,t)=>{t.r(n),t.d(n,{default:()=>g});var r=t(6985),a=t.n(r),o=t(3379),c=t.n(o),i=t(7795),u=t.n(i),l=t(569),s=t.n(l),m=t(3565),f=t.n(m),d=t(9216),p=t.n(d),v=t(4589),h=t.n(v),y=t(57),b={};b.styleTagTransform=h(),b.setAttributes=f(),b.insert=s().bind(null,"head"),b.domAPI=u(),b.insertStyleElement=p();c()(y.Z,b);const E=y.Z&&y.Z.locals?y.Z.locals:void 0;const g=function(){return a().createElement("div",{className:E.notfound})}},4035:(e,n,t)=>{function r(e,n,t,r,a,o,c){try{var i=e[o](c),u=i.value}catch(e){return void t(e)}i.done?n(u):Promise.resolve(u).then(r,a)}function a(e){return function(){var n=this,t=arguments;return new Promise((function(a,o){var c=e.apply(n,t);function i(e){r(c,a,o,i,u,"next",e)}function u(e){r(c,a,o,i,u,"throw",e)}i(void 0)}))}}t.d(n,{OY:()=>c,xQ:()=>i,O5:()=>u});var o=new(t(8134).Z)("ms-db");o.version(1).stores({"ms-config":"id,value"});var c=function(){var e=a(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.table("ms-config").where("id").equals(n).first();case 2:return t=e.sent,e.abrupt("return",null==t?void 0:t.value);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),i=function(){var e=a(regeneratorRuntime.mark((function e(n,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.table("ms-config").put({id:n,value:t});case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),u=function(){var e=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.table("ms-config").clear();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},57:(e,n,t)=>{t.d(n,{Z:()=>f});var r=t(8081),a=t.n(r),o=t(3645),c=t.n(o),i=t(1667),u=t.n(i),l=new URL(t(1642),t.b),s=c()(a()),m=u()(l);s.push([e.id,".CnNzBxLqCuPsMQ2_z9Am {\n  background-image: url("+m+");\n  width: 32%;\n  height: 90%;\n  margin: 0 auto 0 auto;\n  padding-top: 1rem;\n  background-repeat: no-repeat;\n  background-size: 100%;\n}\n",""]),s.locals={notfound:"CnNzBxLqCuPsMQ2_z9Am"};const f=s},9461:(e,n,t)=>{t.d(n,{Z:()=>i});var r=t(8081),a=t.n(r),o=t(3645),c=t.n(o)()(a());c.push([e.id,".JXreb6JBuJTc8K5R63BX {\n  cursor: pointer;\n  padding: 4px;\n  vertical-align: middle;\n}\n.RibsWD0UvMJ6TFMHrbE7 {\n  width: 336px;\n  height: 500px;\n}\n.G1chC1TWC1CCU7Cu2jk8 {\n  height: 300px;\n  padding: 0.5em;\n}\n.NQ1ji2HDyPaaSHL9tLMj {\n  height: 100%;\n}\n.cimUpSKZyDfGoeudwanQ > div {\n  display: inline-block;\n  cursor: pointer;\n  width: 50%;\n  height: 46px;\n  color: rgba(0, 0, 0, 0.85);\n  line-height: 46px;\n  text-align: center;\n  border-top: 1px solid #f0f0f0;\n  border-radius: 0 0 2px 2px;\n  transition: all 0.3s;\n}\n.cimUpSKZyDfGoeudwanQ > div:hover {\n  background-color: #f5f5f5;\n}\n.BegdgceivVMTNN0qsthR {\n  cursor: pointer;\n  padding: 0px 1em;\n}\n.BegdgceivVMTNN0qsthR:hover {\n  background-color: #f5f5f5;\n}\n.Fjf_yZOiH1odFrqpPAca {\n  height: 100%;\n}\n.Fjf_yZOiH1odFrqpPAca .ant-tabs-nav {\n  display: none;\n}\n.Fjf_yZOiH1odFrqpPAca .ant-tabs-content-holder > .ant-tabs-content {\n  height: 100%;\n}\n.AfOexQKn3gFDyOBUMf4S {\n  height: 100%;\n}\n.AfOexQKn3gFDyOBUMf4S .ant-tabs-content-holder {\n  display: none;\n}\n.AfOexQKn3gFDyOBUMf4S .ant-tabs-nav::before {\n  display: none;\n}\n.AfOexQKn3gFDyOBUMf4S .ant-tabs-nav {\n  height: 100%;\n  margin: unset;\n  padding-bottom: 3px;\n  padding-top: 5px;\n}\n.d61RvbWS_xQvpMzAJK1l .ant-pro-global-header-layout-side > div {\n  min-width: 0;\n}\n",""]),c.locals={notification:"JXreb6JBuJTc8K5R63BX",notificationOverlay:"RibsWD0UvMJ6TFMHrbE7",notificationTabs:"G1chC1TWC1CCU7Cu2jk8",notificationDropdown:"NQ1ji2HDyPaaSHL9tLMj",notificationBottom:"cimUpSKZyDfGoeudwanQ",userName:"BegdgceivVMTNN0qsthR",tabsHideNav:"Fjf_yZOiH1odFrqpPAca",tabsNavTop:"AfOexQKn3gFDyOBUMf4S",proLayout:"d61RvbWS_xQvpMzAJK1l"};const i=c},1642:(e,n,t)=>{e.exports=t.p+"c4aa9428942a8f23e472.svg"}}]);