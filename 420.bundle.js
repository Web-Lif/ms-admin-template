"use strict";(self.webpackChunkms_admin_template=self.webpackChunkms_admin_template||[]).push([[420,909],{97909:(n,e,t)=>{t.r(e),t.d(e,{default:()=>a});var r=t(35944),o=t(70917);function i(){var n,e,t=(n=["\n            background-image: url(/svg/undraw_Taken_re_yn20.svg);\n            width: 32%;\n            height: 80%;\n            margin: 0 auto 0 auto;\n            padding-top: 1rem;\n            background-repeat: no-repeat;\n            background-size: 100%;\n        "],e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}})));return i=function(){return t},t}const a=function(){return(0,r.tZ)("div",{css:(0,o.iv)(i())})}},6420:(n,e,t)=>{t.r(e),t.d(e,{default:()=>G});var r=t(35944),o=t(67294),i=t(89250),a=t(79655),c=t(10749),u=t(6940),l=t(24616),f=t(25592),s=t(73218),d=t(47711),p=t(2825),h=t(76570),v=t(64756),y=t(70438),b=t.n(y),m=t(70917),g=t(48640),k=t(89317);function w(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function Z(){var n=w(["\n                > div {\n                    display: inline-block;\n                    cursor: pointer;\n                    width: 50%;\n                    height: 46px;\n                    color: rgba(0,0,0,.85);\n                    line-height: 46px;\n                    text-align: center;\n                    border-top: 1px solid #f0f0f0;\n                    border-radius: 0 0 2px 2px;\n                    transition: all .3s;\n                    &:hover {\n                        background-color: #f5f5f5;\n                    }\n                }\n            "]);return Z=function(){return n},n}function O(){var n=w(["\n                        width: 336px;\n                        height: 500px;\n                    "]);return O=function(){return n},n}function S(){var n=w(["\n                            height: 100%;\n                        "]);return S=function(){return n},n}function x(){var n=w(["\n                                cursor: pointer;\n                                padding: 4px;\n                                vertical-align: middle;\n                            "]);return x=function(){return n},n}var j=function(){return(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.Tabs,{centered:!0,items:[{key:"message",label:'"消息(4)',children:(0,r.tZ)(r.HY,{children:"消息内容"})},{key:"task",label:'"代办(10)',children:(0,r.tZ)(r.HY,{children:"代办内容"})}]}),(0,r.BX)("div",{css:(0,m.iv)(Z()),children:[(0,r.tZ)("div",{children:"清空通知"}),(0,r.tZ)("div",{children:"查看更多"})]})]})};const T=function(n){var e=n.count;return(0,r.tZ)(m.ms,{children:function(n){var t=n.css;return(0,r.tZ)(u.Dropdown,{trigger:["click"],placement:"bottomLeft",overlayClassName:t(O()),dropdownRender:function(){return(0,r.tZ)(j,{})},children:(0,r.tZ)("div",{css:(0,m.iv)(S()),children:(0,r.tZ)(u.Badge,{count:e,css:(0,m.iv)(x()),children:(0,r.tZ)(k.Z,{})})})})}})};var E=t(97909),P=t(57709),C=t(26498);function I(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function R(n,e,t,r,o,i,a){try{var c=n[i](a),u=c.value}catch(n){return void t(n)}c.done?e(u):Promise.resolve(u).then(r,o)}function _(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(n){R(i,r,o,a,c,"next",n)}function c(n){R(i,r,o,a,c,"throw",n)}a(void 0)}))}}function A(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function B(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){A(n,e,t[e])}))}return n}function D(n,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):function(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})),n}function Y(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,i=[],a=!0,c=!1;try{for(t=t.call(n);!(a=(r=t.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(n){c=!0,o=n}finally{try{a||null==t.return||t.return()}finally{if(c)throw o}}return i}}(n,e)||H(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function L(n){return function(n){if(Array.isArray(n))return I(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||H(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(n,e){if(n){if("string"==typeof n)return I(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?I(n,e):void 0}}var X=function(n,e){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(n,a)}catch(n){i=[6,n],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};function F(){var n=z(["\n                cursor: pointer;\n                padding: 0px 1em;\n                &:hover {\n                    background-color: #f5f5f5;\n                }\n            "]);return F=function(){return n},n}function N(){var n=z(["\n                        height: 100%;\n                        .ant-tabs-content-holder {\n                            .ant-tabs-content {\n                                height: 100%;\n                                > div {\n                                    height: 100%;\n                                    overflow: auto;\n                                    padding: .5rem 1.5rem;\n                                }\n                            }\n                        }\n                    "]);return N=function(){return n},n}function U(){var n=z(["\n                        height: 100%;\n                        .ant-tabs-content-holder {\n                            display: none;\n                        }\n                        .ant-tabs-nav::before {\n                            display: none;\n                        }\n                        .ant-tabs-nav {\n                            height: 100%;\n                            margin: unset;\n                            padding-bottom: 3px;\n                            padding-top: 5px;\n                        }\n                    "]);return U=function(){return n},n}function K(){var n=z(["\n                    height: 100%;\n                    .ant-pro-global-header {\n                        margin: 0px;\n                    }\n                    .ant-pro-layout-header-mix {\n                        padding-inline: 0px !important;\n                    }\n\n                    .ant-pro-layout-content {\n                        padding-block: 0px !important;\n                        padding-inline: 0px !important;\n                    }\n\n                    .ant-pro-global-header-logo {\n                        width: ","px;\n                        margin: 0px;\n                        justify-content: center;\n                    }\n                    .ant-pro-global-header-logo + div{\n                        overflow: hidden;\n                    }\n                "]);return K=function(){return n},n}var M=function(n){var e=n.name;return(0,r.tZ)(u.Dropdown,{menu:{items:[{key:"logout",icon:(0,r.tZ)(l.Z,{}),label:"退出登录",onClick:function(){(0,C.iA)(),window.location.href="/User/Login"}}]},children:(0,r.tZ)("div",{css:(0,m.iv)(F()),children:e})})},Q=function(n,e){return n.findIndex((function(n){return(n.key||n.path)===e}))},q=function(n,e){n.forEach((function(n){var t=e||"首页";/^\/.*/.test(t)&&(t=null==t?void 0:t.substring(1)),n.fullName=t,n.children&&q(n.children,"".concat(e||"","/").concat(n.name))}))};const G=function(n){var e=n.children,t=(0,i.TH)(),l=Y((0,o.useState)({name:"",title:"",menus:[]}),2),y=l[0],k=l[1],w=Y((0,o.useState)([{path:"/",name:"首页",closable:!1}]),2),Z=w[0],O=w[1],S=Y((0,o.useState)("/"),2),x=S[0],j=S[1];(0,o.useEffect)((function(){window.history.pushState({},"","#".concat(x))}),[x]);var I=Y((0,o.useState)(),2),R=I[0],A=I[1],z=(0,o.useRef)(null),H=(0,o.useRef)(null),F=function(n){var e=[];return n.forEach((function(n,t){var r;n.children?(r=e).splice.apply(r,[t,0].concat(L(F(n.children)))):e.push(n)})),e},G=Y((0,o.useState)([]),2),W=G[0],$=G[1];(0,o.useEffect)((function(){(0,g.OY)("ms-tabs").then((function(n){n&&(null==n?void 0:n.length)>0&&O(n)})),(0,g.OY)("ms-active-key").then((function(n){n&&j(n)}))}),[]),(0,o.useEffect)((function(){(0,g.xQ)("ms-tabs",Z.map((function(n){return D(B({},n),{onClick:void 0})})))}),[Z]),(0,o.useEffect)((function(){(0,g.xQ)("ms-active-key",x)}),[x]);var J={open:function(n){var e=n.item,t=n.active,r=void 0===t||t,o=n.params,i=e.key||e.path;-1===Q(Z,i||"")&&O(L(Z).concat([D(B({},e),{params:o})])),r&&j(i||"/")},close:function(n){var e=n.key,t=n.goback,r=Q(Z,e);-1!==r&&(Z.splice(r,1),O(L(Z))),t&&j(t)},active:function(n){var e=n.key,t=n.params,r=Q(Z,e);Z[r].params=t,O(L(Z)),j(e)},status:"passive"},V=function(){return"multi"===C.vc.tabs&&"mix"===C.vc.layout},nn=[],en=function(n,e){var t,r,o=function(){e&&j(e),O(n)},i=nn.find((function(n){return n.key===x}));try{var a,c,u,l=null==i||null===(a=i.hook)||void 0===a||null===(c=a.current)||void 0===c||null===(u=c.onBeforeCloseTab)||void 0===u?void 0:u.call(c);t=l,(null!=(r=Promise)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](t):t instanceof r)?l.then((function(n){!1!==n&&o()})).catch((function(n){o(),console.error("关闭标签页错误 - [".concat(x,"]"),n)})):!1!==l&&o()}catch(n){o(),console.error("关闭标签页错误 - [".concat(x,"]"),n)}},tn=function(){if(V()){return(0,r.tZ)(u.Tabs,{type:"editable-card",hideAdd:!0,css:(0,m.iv)(U()),activeKey:x,renderTabBar:function(n,e){return(0,r.tZ)(e,D(B({},n),{children:function(n){return function(n){return(0,r.tZ)(u.Dropdown,{menu:{items:[{label:"重新加载",key:"reload",icon:(0,r.tZ)(f.Z,{}),onClick:function(){var e,t;null===(e=z.current)||void 0===e||e.continuousStart();var r=0;(null==R?void 0:R.key)===n.key&&(r+=((null==R?void 0:R.count)||0)+1),A({key:(null===(t=n.key)||void 0===t?void 0:t.toString())||"",count:r}),setTimeout((function(){var n;null===(n=z.current)||void 0===n||n.complete()}),0)}},{label:"关闭其他标签页",key:"closeOther",icon:(0,r.tZ)(s.Z,{}),onClick:function(){var e,t=Z.filter((function(e){var t=e.key||e.path||"";return!!["/",n.key].includes(t)}));en(t,(null===(e=n.key)||void 0===e?void 0:e.toString())||"")}},{label:"关闭右侧标签页",key:"closeRight",icon:(0,r.tZ)(d.Z,{}),onClick:function(){var e,t,r=Q(Z,(null===(e=n.key)||void 0===e?void 0:e.toString())||""),o=Z.slice(0,r+1);en(o,(null===(t=n.key)||void 0===t?void 0:t.toString())||"")}},{label:"强制关闭标签",key:"closeForce",icon:(0,r.tZ)(p.Z,{}),onClick:function(){var e,t=Q(Z,(null===(e=n.key)||void 0===e?void 0:e.toString())||"");if(-1!==t){var r;if(Z.splice(t,1),O(L(Z)),Z.length>0){var o=Z[Z.length-1];r=o.key||o.path}j(r||"/")}}}]},trigger:["contextMenu"],children:n})}(n)}}))},onEdit:function(n,e){if("remove"===e){var t=Q(Z,n);if(-1!==t){var r,o=L(Z);if(o.splice(t,1),o.length>0){var i=o[o.length-1];r=i.key||i.path}en(o,r||"/")}}},onChange:function(n){O(L(Z)),j(n)},items:Z.map((function(n){return{key:n.key||n.path,label:n.name,closable:n.closable}}))})}return null};return(0,r.BX)(r.HY,{children:[(0,r.tZ)(v.Z,{ref:z}),(0,r.tZ)(c.ZP,{css:(0,m.iv)(K(),215),siderWidth:215,title:y.title,layout:C.vc.layout,logo:C.vc.logo,navTheme:C.vc.navTheme,location:V()?{pathname:x.toString()}:t,menu:{request:_((function(){var n,e,t;return X(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,C.cb)()];case 1:return n=r.sent(),q(n.menus),k(n),e=F(n.menus).map((function(n){return{key:n.path||n.key||"",description:n.fullName,title:n.name||"",data:n}})),$(e),[2,n.menus];case 2:return t=r.sent(),console.log(t),[2,[]];case 3:return[2]}}))}))},rightContentRender:function(){return(0,r.BX)(u.Space,{children:[(0,r.tZ)(u.Select,{ref:H,showSearch:!0,value:"",style:{width:250},filterOption:function(n,e){var t,r=null==e||null===(t=e.children)||void 0===t?void 0:t[0],o=b()(r,{style:b().STYLE_FIRST_LETTER}),i=b()(n,{style:b().STYLE_FIRST_LETTER});return new RegExp("^".concat(i.join(""),".*")).test(o.join(""))},onSelect:function(n){var e=W.find((function(e){return e.key===n}));(null==e?void 0:e.data)&&J.open({item:e.data})},suffixIcon:(0,r.tZ)(h.Z,{}),children:W.map((function(n){return(0,r.BX)(u.Select.Option,{value:n.key,children:[n.title," ",(0,r.tZ)("br",{}),(0,r.tZ)(u.Typography.Text,{type:"secondary",children:n.description})]},n.key)}))}),(0,r.tZ)(T,{count:20}),(0,r.tZ)(M,{name:y.name})]})},menuItemRender:function(n,e){var t=n.path;if(t){if("single"===C.vc.tabs)return(0,r.tZ)(a.rU,{to:t,children:e});if(V()){return(0,r.tZ)("div",{role:"link","aria-hidden":"true",onClick:function(){var e=n.key||n.path;-1===Z.findIndex((function(n){var t=n.key||n.path;return e===t}))&&O(L(Z).concat([n])),j(e||"")},children:e})}}return e},headerContentRender:function(){return tn()},children:function(){if(V()){return(0,r.tZ)(u.Tabs,{css:(0,m.iv)(N()),renderTabBar:function(){return(0,r.tZ)("div",{})},activeKey:x,items:Z.map((function(n){var e=window.g_routers.find((function(e){return e.path===n.path})),t=(null==e?void 0:e.component)||E.default,i=n.key||n.path||"";J.status=i===x?"active":"passive";var a=(0,o.createRef)();return nn.push({key:n.key||n.path,hook:a}),{tab:n.name,key:n.key||n.path,label:n.name,closable:n.closable,children:(0,r.tZ)(o.Suspense,{fallback:(0,r.tZ)(P.Z,{}),children:(0,r.tZ)(t,{tabs:D(B({},J),{params:n.params,hooks:a})},(null==R?void 0:R.key)===i?R.count:void 0)})}}))})}return e}()})]})}}}]);