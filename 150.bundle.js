"use strict";(self.webpackChunkms_template=self.webpackChunkms_template||[]).push([[150,134],{87611:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(67294);const a="CnNzBxLqCuPsMQ2_z9Am";const c=function(){return r.createElement("div",{className:a})}},36549:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var r=n(35666),a=n.n(r),c=n(67294),o=n(49656),l=n(81424),u=n(46927),i=n(24616),s=n(25592),f=n(73218),m=n(47711),v=n(2825),d=n(76570),y=n(20079),p=n(70438),h=n.n(p),E=n(62413),k=n(89317);const b="EvWdJGpivEmL52xNn91e",g="QGjO9kCP0pQLzNzJzLiT",w="twzCnjx_TosRBmIce2wg",S="h5dEn9QMw0kWHYcdN5ah",T="mb3_Hjvo95IUZ3xR8fIm";var O=function(){return c.createElement(c.Fragment,null,c.createElement(u.mQ,{centered:!0},c.createElement(u.mQ.TabPane,{tab:"消息(4)",key:"message",className:w},"消息内容"),c.createElement(u.mQ.TabPane,{tab:"代办(10)",key:"task",className:w},"代办内容")),c.createElement("div",{className:T},c.createElement("div",null,"清空通知"),c.createElement("div",null,"查看更多")))};const I=function(e){var t=e.count,n=c.createElement(u.v2,null,c.createElement(O,null));return c.createElement(u.Lt,{trigger:["click"],overlay:n,placement:"bottomLeft",overlayClassName:g},c.createElement("div",{className:S},c.createElement(u.Ct,{count:t,className:b},c.createElement(k.Z,null))))};var x=n(87611),C=n(48150),N=n(93164);const P="BegdgceivVMTNN0qsthR",j="Fjf_yZOiH1odFrqpPAca",R="AfOexQKn3gFDyOBUMf4S",A="d61RvbWS_xQvpMzAJK1l";function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Q(e,t,n,r,a,c,o){try{var l=e[c](o),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,a)}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(){return _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Z(e,t,n[t])}))}return e}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return c}}(e,t)||M(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}var H=function(e){var t=e.name;return c.createElement(u.Lt,{overlay:c.createElement(u.v2,null,c.createElement(u.v2.Item,{key:"logout",icon:c.createElement(i.Z,null)},c.createElement("div",{role:"button","aria-hidden":"true",onClick:function(){(0,N.iA)(),window.location.href="/User/Login"}},"退出登录")))},c.createElement("div",{className:P},t))},U=function(e,t){return e.findIndex((function(e){return(e.key||e.path)===t}))},Y=function(e,t){e.forEach((function(e){var n=t||"首页";/^\/.*/.test(n)&&(n=null==n?void 0:n.substring(1)),e.fullName=n,e.children&&Y(e.children,"".concat(t||"","/").concat(e.name))}))};const q=function(e){var t=e.children,n=(0,o.TH)(),r=z((0,c.useState)({name:"",title:"",menus:[]}),2),i=r[0],p=r[1],k=z((0,c.useState)([{path:"/",name:"首页",closable:!1}]),2),b=k[0],g=k[1],w=z((0,c.useState)("/"),2),S=w[0],T=w[1];(0,c.useEffect)((function(){window.history.pushState({},"","".concat(S))}),[S]);var O=z((0,c.useState)(),2),P=O[0],L=O[1],Z=(0,c.useRef)(null),M=(0,c.useRef)(null),q=function(e){var t=[];return e.forEach((function(e,n){var r;e.children?(r=t).splice.apply(r,[n,0].concat(B(q(e.children)))):t.push(e)})),t},K=z((0,c.useState)([]),2),J=K[0],W=K[1];(0,c.useEffect)((function(){(0,E.OY)("ms-tabs").then((function(e){(null==e?void 0:e.length)>0&&g(e)})),(0,E.OY)("ms-active-key").then((function(e){e&&T(e)}));var e=function(e){var t;"/"===e.key&&(e.stopPropagation(),null===(t=M.current)||void 0===t||t.focus())};return window.addEventListener("keyup",e),function(){window.removeEventListener("keyup",e)}}),[]),(0,c.useEffect)((function(){(0,E.xQ)("ms-tabs",b.map((function(e){return F({},e,{onClick:void 0})})))}),[b]),(0,c.useEffect)((function(){(0,E.xQ)("ms-active-key",S)}),[S]);var D,G={open:function(e){var t=e.item,n=e.active,r=void 0===n||n,a=e.params,c=t.key||t.path;-1===U(b,c)&&g(B(b).concat([F({},t,{params:a})])),r&&T(c)},close:function(e){var t=e.key,n=e.goback,r=U(b,t);-1!==r&&(b.splice(r,1),g(B(b))),n&&T(n)},active:function(e){var t=e.key,n=e.params,r=U(b,t);b[r].params=n,g(B(b)),T(t)},status:"passive"},V=function(){return"multi"===N.vc.tabs&&"side"===N.vc.layout},$=[],X=function(e,t){var n,r,a=function(){t&&T(t),g(e)},c=$.find((function(e){return e.key===S}));try{var o,l,u,i=null==c||null===(o=c.hook)||void 0===o||null===(l=o.current)||void 0===l||null===(u=l.onBeforeCloseTab)||void 0===u?void 0:u.call(l);n=i,(null!=(r=Promise)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](n):n instanceof r)?i.then((function(e){!1!==e&&a()})).catch((function(e){a(),console.error("关闭标签页错误 - [".concat(S,"]"),e)})):!1!==i&&a()}catch(e){a(),console.error("关闭标签页错误 - [".concat(S,"]"),e)}};return c.createElement(c.Fragment,null,c.createElement(y.Z,{ref:Z}),c.createElement(l.ZP,{className:A,title:i.title,layout:N.vc.layout,logo:N.vc.logo,navTheme:N.vc.navTheme,headerTheme:N.vc.headerTheme,location:V()?{pathname:S}:n,fixedHeader:!0,fixSiderbar:!0,menu:{request:(D=a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,N.cb)();case 3:return t=e.sent,Y(t.menus),p(t),n=q(t.menus).map((function(e){return{key:e.path||e.key||"",description:e.fullName,title:e.name||"",data:e}})),W(n),e.abrupt("return",t.menus);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=D.apply(e,t);function c(e){Q(a,n,r,c,o,"next",e)}function o(e){Q(a,n,r,c,o,"throw",e)}c(void 0)}))})},headerContentRender:function(){if(V()){return c.createElement(u.mQ,{type:"editable-card",hideAdd:!0,className:R,activeKey:S,renderTabBar:function(e,t){return c.createElement(t,_({},e),(function(e){return function(e){return c.createElement(u.Lt,{overlay:c.createElement(u.v2,null,c.createElement(u.v2.Item,{key:"reload",icon:c.createElement(s.Z,null),onClick:function(){var t;null===(t=Z.current)||void 0===t||t.continuousStart();var n=0;(null==P?void 0:P.key)===e.key&&(n+=((null==P?void 0:P.count)||0)+1),L({key:e.key,count:n}),setTimeout((function(){var e;null===(e=Z.current)||void 0===e||e.complete()}),0)}},"重新加载"),c.createElement(u.v2.Item,{key:"closeOther",icon:c.createElement(f.Z,null),onClick:function(){var t=b.filter((function(t){var n=t.key||t.path;return!!["/",e.key].includes(n)}));X(t,e.key)}},"关闭其他标签页"),c.createElement(u.v2.Item,{key:"closeRight",icon:c.createElement(m.Z,null),onClick:function(){var t=U(b,e.key),n=b.slice(0,t+1);X(n,e.key)}},"关闭右侧标签页"),c.createElement(u.v2.Item,{key:"closeForce",icon:c.createElement(v.Z,null),onClick:function(){var t=U(b,e.key);if(-1!==t){var n;if(b.splice(t,1),g(B(b)),b.length>0){var r=b[b.length-1];n=r.key||r.path}T(n||"/")}}},"强制关闭标签")),trigger:["contextMenu"]},e)}(e)}))},onEdit:function(e,t){if("remove"===t){var n=U(b,e);if(-1!==n){var r,a=B(b);if(a.splice(n,1),a.length>0){var c=a[a.length-1];r=c.key||c.path}X(a,r||"/")}}},onChange:function(e){g(B(b)),T(e)}},b.map((function(e){return c.createElement(u.mQ.TabPane,{tab:e.name,key:e.key||e.path,closable:e.closable})})))}return null},rightContentRender:function(){return c.createElement(u.T,null,c.createElement(u.Ph,{ref:M,showSearch:!0,value:"",style:{width:250},filterOption:function(e,t){var n,r=null==t||null===(n=t.children)||void 0===n?void 0:n[0],a=h()(r,{style:h().STYLE_FIRST_LETTER}),c=h()(e,{style:h().STYLE_FIRST_LETTER});return new RegExp("^".concat(c.join(""),".*")).test(a.join(""))},onSelect:function(e){var t=J.find((function(t){return t.key===e}));t&&G.open({item:t.data})},suffixIcon:c.createElement(d.Z,null)},J.map((function(e){return c.createElement(u.Ph.Option,{key:e.key,value:e.key},e.title," ",c.createElement("br",null),c.createElement(u.ZT.Text,{type:"secondary"},e.description))}))),c.createElement(I,{count:20}),c.createElement(H,{name:i.name}))},menuItemRender:function(e,t){var n=e.path;if(n){if("single"===N.vc.tabs)return c.createElement(o.rU,{to:n},t);if(V()){return c.createElement("div",{role:"link","aria-hidden":"true",onClick:function(){var t=e.key||e.path;-1===b.findIndex((function(e){var n=e.key||e.path;return t===n}))&&g(B(b).concat([e])),T(t)}},t)}}return t}},function(){if(V()){return c.createElement(u.mQ,{className:j,renderTabBar:function(){return c.createElement("div",null)},activeKey:S},b.map((function(e){var t=window.g_routers.find((function(t){return t.path===e.path})),n=(null==t?void 0:t.component)||x.default,r=e.key||e.path||"";G.status=r===S?"active":"passive";var a=(0,c.createRef)();return $.push({key:e.key||e.path,hook:a}),c.createElement(u.mQ.TabPane,{tab:e.name,key:e.key||e.path,closable:e.closable,forceRender:!0},c.createElement(c.Suspense,{fallback:c.createElement(C.Z,null)},c.createElement(n,{key:(null==P?void 0:P.key)===r?P.count:void 0,tabs:F({},G,{params:e.params,hooks:a})})))})))}return t}()))}}}]);