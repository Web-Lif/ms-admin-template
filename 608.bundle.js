"use strict";(self.webpackChunkms_template=self.webpackChunkms_template||[]).push([[608],{845:(e,n,t)=>{t.r(n);var r=t(6985),a=t.n(r),o=t(563),c=t.n(o),i=t(9656),l=(t(793),t(9650)),u=(t(2714),t(8834)),s=(t(3341),t(789)),m=(t(1761),t(8108)),f=(t(7582),t(3013)),d=(t(8975),t(9210)),p=t(8082),v=t(4616),h=t(5592),y=t(1627),b=t(7711),E=t(2825),g=t(6570),k=t(79),w=t(438),x=t.n(w),Z=t(1625),O=t(8948);const S=function(){var e=(0,r.useRef)(null);return(0,r.useEffect)((function(){var n;return null===(n=e.current)||void 0===n||n.continuousStart(),function(){var n;null===(n=e.current)||void 0===n||n.complete()}}),[]),a().createElement(a().Fragment,null,a().createElement(k.Z,{ref:e}))};var T=t(3379),A=t.n(T),R=t(7795),N=t.n(R),P=t(569),j=t.n(P),I=t(3565),C=t.n(I),L=t(9216),_=t.n(L),F=t(4589),Q=t.n(F),z=t(9461),M={};M.styleTagTransform=Q(),M.setAttributes=C(),M.insert=j().bind(null,"head"),M.domAPI=N(),M.insertStyleElement=_();A()(z.Z,M);const B=z.Z&&z.Z.locals?z.Z.locals:void 0;var H=t(4035),U=(t(4895),t(9166)),q=t(9317),D=t(221),W={};W.styleTagTransform=Q(),W.setAttributes=C(),W.insert=j().bind(null,"head"),W.domAPI=N(),W.insertStyleElement=_();A()(D.Z,W);const K=D.Z&&D.Z.locals?D.Z.locals:void 0;var Y=function(){return a().createElement(a().Fragment,null,a().createElement(m.Z,{centered:!0},a().createElement(m.Z.TabPane,{tab:"消息(4)",key:"message",className:K.notificationTabs},"消息内容"),a().createElement(m.Z.TabPane,{tab:"代办(10)",key:"task",className:K.notificationTabs},"代办内容")),a().createElement("div",{className:K.notificationBottom},a().createElement("div",null,"清空通知"),a().createElement("div",null,"查看更多")))};const J=function(e){var n=e.count,t=a().createElement(d.Z,null,a().createElement(Y,null));return a().createElement(f.Z,{trigger:["click"],overlay:t,placement:"bottomLeft",overlayClassName:K.notificationOverlay},a().createElement("div",{className:K.notificationDropdown},a().createElement(U.Z,{count:n,className:K.notification},a().createElement(q.Z,null))))};function V(e,n,t,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void t(e)}i.done?n(l):Promise.resolve(l).then(r,a)}function G(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function $(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?G(Object(t),!0).forEach((function(n){X(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function X(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ee(e){return function(e){if(Array.isArray(e))return re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,a,o=[],c=!0,i=!1;try{for(t=t.call(e);!(c=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==t.return||t.return()}finally{if(i)throw a}}return o}(e,n)||te(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,n){if(e){if("string"==typeof e)return re(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?re(e,n):void 0}}function re(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var ae=function(e){var n=e.name,t=(0,i.k6)();return a().createElement(f.Z,{overlay:a().createElement(d.Z,null,a().createElement(d.Z.Item,{key:"logout",icon:a().createElement(v.Z,null)},a().createElement("div",{role:"button","aria-hidden":"true",onClick:function(){(0,O.iA)(),t.push("/User/Login")}},"退出登录")))},a().createElement("div",{className:B.userName},n))},oe=function(e,n){return e.findIndex((function(e){return(e.key||e.path)===n}))},ce=function e(n,t){n.forEach((function(n){var r,a=t||"首页";/^\/.*/.test(a)&&(a=null===(r=a)||void 0===r?void 0:r.substring(1));n.fullName=a,n.children&&e(n.children,"".concat(t||"","/").concat(n.name))}))};const ie=function(e){var n=e.children,t=(0,i.TH)(),o=ne((0,r.useState)({name:"",title:"",menus:[]}),2),c=o[0],v=o[1],w=ne((0,r.useState)([{path:"/",name:"首页",closable:!1}]),2),T=w[0],A=w[1],R=ne((0,r.useState)("/"),2),N=R[0],P=R[1],j=ne((0,r.useState)(),2),I=j[0],C=j[1],L=(0,r.useRef)(null),_=(0,r.useRef)(null),F=function e(n){var t=[];return n.forEach((function(n,r){n.children?t.splice.apply(t,[r,0].concat(ee(e(n.children)))):t.push(n)})),t},Q=ne((0,r.useState)([]),2),z=Q[0],M=Q[1];(0,r.useEffect)((function(){(0,H.OY)("ms-tabs").then((function(e){(null==e?void 0:e.length)>0&&A(e)})),(0,H.OY)("ms-active-key").then((function(e){e&&P(e)}));var e=function(e){var n;"/"===e.key&&(e.stopPropagation(),null===(n=_.current)||void 0===n||n.focus())};return window.addEventListener("keyup",e),function(){window.removeEventListener("keyup",e)}}),[]),(0,r.useEffect)((function(){(0,H.xQ)("ms-tabs",T.map((function(e){return $($({},e),{},{onClick:void 0})})))}),[T]),(0,r.useEffect)((function(){(0,H.xQ)("ms-active-key",N)}),[N]);var U,q,D={open:function(e){var n=e.item,t=e.active,r=void 0===t||t,a=e.params,o=n.key||n.path;-1===oe(T,o)&&A([].concat(ee(T),[$($({},n),{},{params:a})])),r&&P(o)},close:function(e){var n=e.key,t=e.goback,r=oe(T,n);-1!==r&&(T.splice(r,1),A(ee(T))),t&&P(t)},active:function(e){var n=e.key,t=e.params,r=oe(T,n);T[r].params=t,A(ee(T)),P(n)},status:"passive"},W=function(){return"multi"===O.vc.tabs&&"side"===O.vc.layout},K=[],Y=function(e,n){var t=function(){n&&P(n),A(e)},r=K.find((function(e){return e.key===N}));try{var a,o,c,i=null==r||null===(a=r.hook)||void 0===a||null===(o=a.current)||void 0===o||null===(c=o.onBeforeCloseTab)||void 0===c?void 0:c.call(o);i instanceof Promise?i.then((function(e){!1!==e&&t()})).catch((function(e){t(),console.error("关闭标签页错误 - [".concat(N,"]"),e)})):!1!==i&&t()}catch(e){t(),console.error("关闭标签页错误 - [".concat(N,"]"),e)}};return a().createElement(a().Fragment,null,a().createElement(k.Z,{ref:L}),a().createElement(p.ZP,{className:B.proLayout,title:c.title,layout:O.vc.layout,navTheme:O.vc.navTheme,headerTheme:O.vc.headerTheme,location:W()?{pathname:N}:t,fixedHeader:!0,fixSiderbar:!0,menu:{request:(U=regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,O.cb)();case 3:return n=e.sent,ce(n.menus),v(n),t=F(n.menus).map((function(e){return{key:e.path||e.key||"",description:e.fullName,title:e.name||"",data:e}})),M(t),e.abrupt("return",n.menus);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})),q=function(){var e=this,n=arguments;return new Promise((function(t,r){var a=U.apply(e,n);function o(e){V(a,t,r,o,c,"next",e)}function c(e){V(a,t,r,o,c,"throw",e)}o(void 0)}))},function(){return q.apply(this,arguments)})},headerContentRender:function(){if(W()){return a().createElement(m.Z,{type:"editable-card",hideAdd:!0,className:B.tabsNavTop,activeKey:N,renderTabBar:function(e,n){return a().createElement(n,e,(function(e){return function(e){return a().createElement(f.Z,{overlay:a().createElement(d.Z,null,a().createElement(d.Z.Item,{key:"reload",icon:a().createElement(h.Z,null),onClick:function(){var n;null===(n=L.current)||void 0===n||n.continuousStart();var t=0;(null==I?void 0:I.key)===e.key&&(t+=((null==I?void 0:I.count)||0)+1),C({key:e.key,count:t}),setTimeout((function(){var e;null===(e=L.current)||void 0===e||e.complete()}),0)}},"重新加载"),a().createElement(d.Z.Item,{key:"closeOther",icon:a().createElement(y.Z,null),onClick:function(){var n=T.filter((function(n){var t=n.key||n.path;return!!["/",e.key].includes(t)}));Y(n,e.key)}},"关闭其他标签页"),a().createElement(d.Z.Item,{key:"closeRight",icon:a().createElement(b.Z,null),onClick:function(){var n=oe(T,e.key),t=T.slice(0,n+1);Y(t,e.key)}},"关闭右侧标签页"),a().createElement(d.Z.Item,{key:"closeForce",icon:a().createElement(E.Z,null),onClick:function(){var n=oe(T,e.key);if(-1!==n){var t;if(T.splice(n,1),A(ee(T)),T.length>0){var r=T[T.length-1];t=r.key||r.path}P(t||"/")}}},"强制关闭标签")),trigger:["contextMenu"]},e)}(e)}))},onEdit:function(e,n){if("remove"===n){var t=oe(T,e);if(-1!==t){var r,a=ee(T);if(a.splice(t,1),a.length>0){var o=a[a.length-1];r=o.key||o.path}Y(a,r||"/")}}},onChange:function(e){A(ee(T)),P(e)}},T.map((function(e){return a().createElement(m.Z.TabPane,{tab:e.name,key:e.key||e.path,closable:e.closable})})))}return null},rightContentRender:function(){return a().createElement(l.Z,null,a().createElement(u.Z,{ref:_,showSearch:!0,value:"",style:{width:250},filterOption:function(e,n){var t=x()(null==n?void 0:n.children[0],{style:x().STYLE_FIRST_LETTER}),r=x()(e,{style:x().STYLE_FIRST_LETTER});return new RegExp("^".concat(r.join(""),".*")).test(t.join(""))},onSelect:function(e){var n=z.find((function(n){return n.key===e}));n&&D.open({item:n.data})},suffixIcon:a().createElement(g.Z,null)},z.map((function(e){return a().createElement(u.Z.Option,{key:e.key,value:e.key},e.title," ",a().createElement("br",null),a().createElement(s.Z.Text,{type:"secondary"},e.description))}))),a().createElement(J,{count:20}),a().createElement(ae,{name:c.name}))},menuItemRender:function(e,n){var t=e.path;if(t){if("single"===O.vc.tabs)return a().createElement(i.rU,{to:t},n);if(W()){return a().createElement("div",{role:"link","aria-hidden":"true",onClick:function(){var n=e.key||e.path;-1===T.findIndex((function(e){var t=e.key||e.path;return n===t}))&&A([].concat(ee(T),[e])),P(n)}},n)}}return n}},function(){if(W()){return a().createElement(m.Z,{className:B.tabsHideNav,activeKey:N},T.map((function(e){var n=window.g_routers.find((function(n){return n.path===e.path})),t=(null==n?void 0:n.component)||Z.default,o=e.key||e.path||"";D.status=o===N?"active":"passive";var c=(0,r.createRef)();return K.push({key:e.key||e.path,hook:c}),a().createElement(m.Z.TabPane,{tab:e.name,key:e.key||e.path,closable:e.closable,forceRender:!0},a().createElement(r.Suspense,{fallback:a().createElement(S,null)},a().createElement(t,{key:(null==I?void 0:I.key)===o?I.count:void 0,tabs:$($({},D),{},{params:e.params,hooks:c})})))})))}return n}()))};const le=function(e){var n,t=e.children;return n=(0,i.TH)(),(0,O.QN)().includes(n.pathname)?a().createElement(a().Fragment,null,t):(0,O.He)()?a().createElement(ie,null,t):((0,i.k6)().replace("/User/Login"),null)};var ue=a().lazy((function(){return t.e(21).then(t.bind(t,2021))})),se=a().lazy((function(){return t.e(963).then(t.bind(t,8963))})),me=a().lazy((function(){return t.e(3).then(t.bind(t,9003))})),fe=[{path:"/",component:ue},{path:"/User/Login",component:se},{path:"/welcome",component:me}],de=[],pe=a().lazy((function(){return Promise.resolve().then(t.bind(t,1625))}));const ve=function(e){var n=e.routers,t=void 0===n?[]:n;return a().createElement(i.VK,{basename:"/ms-template"},a().createElement(i.rs,null,a().createElement(i.AW,{path:"/",exact:!0,sensitive:!0,render:function(e){return a().createElement(le,e,a().createElement(r.Suspense,{fallback:a().createElement(S,null)},a().createElement(ue,e)))}}),a().createElement(i.AW,{path:"/User/Login",exact:!0,sensitive:!0,render:function(e){return a().createElement(le,e,a().createElement(r.Suspense,{fallback:a().createElement(S,null)},a().createElement(se,e)))}}),a().createElement(i.AW,{path:"/welcome",exact:!0,sensitive:!0,render:function(e){return a().createElement(le,e,a().createElement(r.Suspense,{fallback:a().createElement(S,null)},a().createElement(me,e)))}}),t.map((function(e){return a().createElement(i.AW,{path:e.path,exact:!0,sensitive:!0,key:e.path,render:function(n){var t=e.component;return a().createElement(le,n,a().createElement(r.Suspense,{fallback:a().createElement(S,null)},a().createElement(t,n)))}})})),a().createElement(i.AW,{path:"*",render:function(e){var n=a().createElement(pe,e);return a().createElement(le,e,a().createElement(r.Suspense,{fallback:a().createElement("div",null)},n))}})))};if(window.g_routers=fe.concat(de),document.querySelector("#root"))c().render(a().createElement(ve,{routers:de}),document.querySelector("#root"));else{var he=document.createElement("div");he.setAttribute("id","root"),he.style.width="100%",he.style.height="100%",document.body.appendChild(he),c().render(a().createElement(ve,{routers:de}),he)}},8948:(e,n,t)=>{t.d(n,{QN:()=>o,cb:()=>c,He:()=>i,iA:()=>l,vc:()=>u});var r=t(4035);function a(e,n,t,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void t(e)}i.done?n(l):Promise.resolve(l).then(r,a)}var o=function(){return["/User/Login"]},c=function(){var e,n=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{name:"系统管理员",title:"MS Template",menus:[{path:"/",name:"欢迎页面",children:[{path:"/one/welcome",name:"第一个",children:[{path:"/welcome",name:"第二个"},{path:"/test/",name:"React 微前端"},{path:"/test/test-vue",name:"Vue 微前端"}]}]}]});case 1:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var c=e.apply(n,t);function i(e){a(c,r,o,i,l,"next",e)}function l(e){a(c,r,o,i,l,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),i=function(){return!!localStorage.getItem("ms-token")},l=function(){localStorage.clear(),(0,r.O5)()},u={layout:"side",navTheme:"dark",headerTheme:"dark",tabs:"multi"}},1625:(e,n,t)=>{t.r(n),t.d(n,{default:()=>g});var r=t(6985),a=t.n(r),o=t(3379),c=t.n(o),i=t(7795),l=t.n(i),u=t(569),s=t.n(u),m=t(3565),f=t.n(m),d=t(9216),p=t.n(d),v=t(4589),h=t.n(v),y=t(57),b={};b.styleTagTransform=h(),b.setAttributes=f(),b.insert=s().bind(null,"head"),b.domAPI=l(),b.insertStyleElement=p();c()(y.Z,b);const E=y.Z&&y.Z.locals?y.Z.locals:void 0;const g=function(){return a().createElement("div",{className:E.notfound})}},4035:(e,n,t)=>{function r(e,n,t,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void t(e)}i.done?n(l):Promise.resolve(l).then(r,a)}function a(e){return function(){var n=this,t=arguments;return new Promise((function(a,o){var c=e.apply(n,t);function i(e){r(c,a,o,i,l,"next",e)}function l(e){r(c,a,o,i,l,"throw",e)}i(void 0)}))}}t.d(n,{OY:()=>c,xQ:()=>i,O5:()=>l});var o=new(t(8134).Z)("ms-db");o.version(1).stores({"ms-config":"id,value"});var c=function(){var e=a(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.table("ms-config").where("id").equals(n).first();case 2:return t=e.sent,e.abrupt("return",null==t?void 0:t.value);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),i=function(){var e=a(regeneratorRuntime.mark((function e(n,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.table("ms-config").put({id:n,value:t});case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),l=function(){var e=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.table("ms-config").clear();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},57:(e,n,t)=>{t.d(n,{Z:()=>f});var r=t(8081),a=t.n(r),o=t(3645),c=t.n(o),i=t(1667),l=t.n(i),u=new URL(t(1642),t.b),s=c()(a()),m=l()(u);s.push([e.id,".CnNzBxLqCuPsMQ2_z9Am {\n  background-image: url("+m+");\n  width: 32%;\n  height: 90%;\n  margin: 0 auto 0 auto;\n  padding-top: 1rem;\n  background-repeat: no-repeat;\n  background-size: 100%;\n}\n",""]),s.locals={notfound:"CnNzBxLqCuPsMQ2_z9Am"};const f=s},221:(e,n,t)=>{t.d(n,{Z:()=>i});var r=t(8081),a=t.n(r),o=t(3645),c=t.n(o)()(a());c.push([e.id,".EvWdJGpivEmL52xNn91e {\n  cursor: pointer;\n  padding: 4px;\n  vertical-align: middle;\n}\n.QGjO9kCP0pQLzNzJzLiT {\n  width: 336px;\n  height: 500px;\n}\n.twzCnjx_TosRBmIce2wg {\n  height: 300px;\n  padding: 0.5em;\n}\n.h5dEn9QMw0kWHYcdN5ah {\n  height: 100%;\n}\n.mb3_Hjvo95IUZ3xR8fIm > div {\n  display: inline-block;\n  cursor: pointer;\n  width: 50%;\n  height: 46px;\n  color: rgba(0, 0, 0, 0.85);\n  line-height: 46px;\n  text-align: center;\n  border-top: 1px solid #f0f0f0;\n  border-radius: 0 0 2px 2px;\n  transition: all 0.3s;\n}\n.mb3_Hjvo95IUZ3xR8fIm > div:hover {\n  background-color: #f5f5f5;\n}\n",""]),c.locals={notification:"EvWdJGpivEmL52xNn91e",notificationOverlay:"QGjO9kCP0pQLzNzJzLiT",notificationTabs:"twzCnjx_TosRBmIce2wg",notificationDropdown:"h5dEn9QMw0kWHYcdN5ah",notificationBottom:"mb3_Hjvo95IUZ3xR8fIm"};const i=c},9461:(e,n,t)=>{t.d(n,{Z:()=>i});var r=t(8081),a=t.n(r),o=t(3645),c=t.n(o)()(a());c.push([e.id,".BegdgceivVMTNN0qsthR {\n  cursor: pointer;\n  padding: 0px 1em;\n}\n.BegdgceivVMTNN0qsthR:hover {\n  background-color: #f5f5f5;\n}\n.Fjf_yZOiH1odFrqpPAca {\n  height: 100%;\n}\n.Fjf_yZOiH1odFrqpPAca .ant-tabs-nav {\n  display: none;\n}\n.Fjf_yZOiH1odFrqpPAca .ant-tabs-content-holder > .ant-tabs-content {\n  height: 100%;\n}\n.AfOexQKn3gFDyOBUMf4S {\n  height: 100%;\n}\n.AfOexQKn3gFDyOBUMf4S .ant-tabs-content-holder {\n  display: none;\n}\n.AfOexQKn3gFDyOBUMf4S .ant-tabs-nav::before {\n  display: none;\n}\n.AfOexQKn3gFDyOBUMf4S .ant-tabs-nav {\n  height: 100%;\n  margin: unset;\n  padding-bottom: 3px;\n  padding-top: 5px;\n}\n.d61RvbWS_xQvpMzAJK1l .ant-pro-global-header-layout-side > div {\n  min-width: 0;\n}\n",""]),c.locals={userName:"BegdgceivVMTNN0qsthR",tabsHideNav:"Fjf_yZOiH1odFrqpPAca",tabsNavTop:"AfOexQKn3gFDyOBUMf4S",proLayout:"d61RvbWS_xQvpMzAJK1l"};const i=c},1642:(e,n,t)=>{e.exports=t.p+"c4aa9428942a8f23e472.svg"}}]);